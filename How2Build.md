### Folder Structure After Build

After running the `cmake` and `cmake --build` commands, the output files will be organized as follows:

```plaintext
TAPLite/
├── build/               # Build directory
│   ├── output/
│   │   ├── bin/         # Executables
│   │   │   ├── example.exe
│   │   ├── lib/         # Libraries
│   │   │   ├── TAPLite.dll
│   │   │   ├── TAPLite.lib
│   │   ├── python/      # Python bindings
│   │   │   ├── TAPLite.pyd
├── CMakeLists.txt
├── TAPLite/
│   ├── core/
│   │   ├── TAPLite.cpp
│   │   ├── TAPLite.h
```

---

### Building the Project

1. **Create Build Directory**:
   ```bash
   mkdir build
   ```
   ```bash
   cd build
   ```

2. **Run CMake**:
   ```bash
   cmake .. -G "Visual Studio 17 2022" -A x64
   ```

3. **Build the Project**:
   ```bash
   cmake --build . --config Release
   ```

4. **Check Outputs**:
   - Python extension: `build/output/python/TAPLite.pyd`
   - Libraries: `build/output/lib/`
   - Executables: `build/output/bin/`


---


After building the project and ensuring that the necessary Python bindings are properly generated, we can use `pip install .` to install the Python package locally. However, to achieve this, you'll need to ensure the project is structured correctly and the `setup.py` file is properly configured.

Here’s the step-by-step process:

---

### 1. **Ensure Folder Structure Matches the Standard**

The folder structure should resemble the following after the build:

```plaintext
TAPLite/
├── build/                      # Build directory (generated by CMake)
│   ├── output/
│   │   ├── python/             # Python bindings output directory
│   │   │   ├── TAPLite.pyd     # The compiled Python extension file
├── TAPLite/
│   ├── core/
│   │   ├── TAPLite.cpp
│   │   ├── TAPLite.h
├── setup.py                    # Python setup script
├── CMakeLists.txt              # CMake configuration file
```

Make sure the Python bindings (`TAPLite.pyd`) are placed in `build/output/python/`.

---

### 2. **Update `setup.py` for Pip Installation**

Modify your `setup.py` file to include the `TAPLite.pyd` file in the package. Here's an example `setup.py`:

```python
from setuptools import setup, find_packages, Extension
import os
import platform

# Platform-specific shared library suffix
ext_suffix = ".pyd" if platform.system() == "Windows" else ".so"

# Path to the compiled Python extension
build_output = os.path.join("build", "output", "python")
extension_file = os.path.join(build_output, f"TAPLite{ext_suffix}")

# Ensure the compiled file exists
if not os.path.exists(extension_file):
    raise RuntimeError(f"Compiled extension file {extension_file} not found. Build the project first.")

setup(
    name="TAPLite",
    version="0.1.0",
    author="Your Name",
    description="Python bindings for the TAPLite traffic assignment model.",
    packages=find_packages(),  # Automatically find Python packages
    package_dir={"": "."},     # Use the current directory as the package root
    data_files=[
        ("", [extension_file])  # Include the compiled Python extension
    ],
    classifiers=[
        "Programming Language :: Python :: 3",
        "Operating System :: OS Independent",
    ],
    python_requires=">=3.7",
)
```

---

### 3. **Build the C++ Code with Python Bindings**

Make sure the compiled Python bindings (`TAPLite.pyd` on Windows or `TAPLite.so` on Linux/macOS) are created. This file will be located in `build/output/python/` after a successful build.

Steps to build:
```bash
# Create the build directory
mkdir build
cd build

# Generate the build files
cmake .. -G "Visual Studio 17 2022" -A x64

# Build the project
cmake --build . --config Release
```

---

### 4. **Install the Python Package**

Now, navigate to the root directory of the project (where `setup.py` is located) and run:

```bash
pip install .
```

This will install the Python package along with the compiled Python bindings.

---

### 5. **Test the Installed Package**

After installation, you can test the package in Python to ensure everything works as expected:

```python
import TAPLite

# Call a function from TAPLite to confirm it works
TAPLite.read_settings_file()
```

---

### 6. **Optional: Distribute as a Wheel**

If you plan to distribute the package, you can build a Python wheel using the following command:

```bash
pip install wheel
python setup.py bdist_wheel
```

This will generate a `.whl` file that can be installed using `pip install <file>.whl` on other systems.

---

### Summary

1. Build the project using CMake.
2. Ensure the compiled Python bindings (`TAPLite.pyd`) are in the correct folder.
3. Use the provided `setup.py` to install the package locally with `pip install .`.
4. Test the installation in Python.
